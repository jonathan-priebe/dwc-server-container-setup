<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName naswii.nintendowifi.net
    ServerAlias conntest.nintendowifi.net
    
    # Logging
    ErrorLog "logs/nas-conntest-error.log"
    CustomLog "logs/nas-conntest-access.log" combined
    
    # Preserve real client IP
    RemoteIPHeader X-Forwarded-For
    RemoteIPInternalProxy 172.19.0.0/16
    
    # Proxy to GameSpy NAS Server
    ProxyPreserveHost On
    ProxyPass / http://dwc-gamespy:8080/
    ProxyPassReverse / http://dwc-gamespy:8080/
    
    # Forward real client IP
    RequestHeader set X-Real-IP "%{REMOTE_ADDR}s"
    RequestHeader set X-Forwarded-For "%{REMOTE_ADDR}s"
    RequestHeader set X-Forwarded-Proto "http"
</VirtualHost>