<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName dls1.nintendowifi.net
    
    # Logging
    ErrorLog "logs/dls-error.log"
    CustomLog "logs/dls-access.log" combined
    
    # Preserve real client IP
    RemoteIPHeader X-Forwarded-For
    RemoteIPInternalProxy 172.19.0.0/16
    
    # Proxy to GameSpy DLS Server
    ProxyPreserveHost On
    ProxyPass / http://dwc-gamespy:9003/
    ProxyPassReverse / http://dwc-gamespy:9003/
    
    # Forward real client IP
    RequestHeader set X-Real-IP "%{REMOTE_ADDR}s"
    RequestHeader set X-Forwarded-For "%{REMOTE_ADDR}s"
    RequestHeader set X-Forwarded-Proto "http"
</VirtualHost>